<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Choisir une vision</title>
    <style>
      :root { color-scheme: dark; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        background: radial-gradient(1200px 700px at 50% 10%, #243a55 0%, #0b1220 55%, #070b12 100%);
        color: #e5e7eb;
        min-height: 100vh;
        display: grid;
        place-items: center;
        padding: 32px 16px;
      }
      .card {
        width: min(860px, 100%);
        background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
        border: 1px solid rgba(255,255,255,.12);
        border-radius: 18px;
        box-shadow: 0 12px 50px rgba(0,0,0,.45);
        padding: 28px;
      }
      h1 { margin: 0 0 6px; font-size: 28px; }
      p { margin: 0 0 18px; color: #cbd5e1; }
      .list { display: grid; gap: 12px; margin-top: 14px; }
      .item {
        display: grid;
        grid-template-columns: 24px 1fr;
        gap: 12px;
        align-items: start;
        padding: 14px 14px;
        border-radius: 14px;
        border: 1px solid rgba(255,255,255,.10);
        background: rgba(0,0,0,.18);
        cursor: pointer;
      }
      .item:hover { border-color: rgba(255,255,255,.22); }
      .item b { display: block; margin-bottom: 4px; }
      .item small { color: #94a3b8; }
      .actions {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
        align-items: center;
        margin-top: 18px;
        flex-wrap: wrap;
      }
      button, a.btn {
        border: 1px solid rgba(255,255,255,.16);
        background: rgba(255,255,255,.06);
        color: #e5e7eb;
        padding: 10px 14px;
        border-radius: 12px;
        cursor: pointer;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      button:disabled {
        opacity: .45;
        cursor: not-allowed;
      }
      .note { margin-top: 14px; color: #94a3b8; font-size: 13px; }
      .row { display:flex; justify-content: space-between; gap: 12px; align-items: baseline; }
      .link { color: #93c5fd; text-decoration: underline; }
    </style>
  </head>
  <body>
    <div class="card">
      <div class="row">
        <div>
          <h1>Choisir une vision</h1>
          <p>Sélectionnez la vision à étudier, puis déroulez ses raffinements (R1, R2, R3…).</p>
        </div>
        <div>
          <a class="link" href="/refinements">Retour</a>
        </div>
      </div>

      <div class="list" id="choices">
        <label class="item">
          <input type="radio" name="vision" value="vision_1" />
          <div>
            <b>Vision 1 — Rester salarié</b>
            <small>Étudier la trajectoire avec hypothèses par défaut.</small>
          </div>
        </label>

        <label class="item">
          <input type="radio" name="vision" value="vision_2" />
          <div>
            <b>Vision 2 — Micro-activité</b>
            <small>Étudier la trajectoire avec hypothèses par défaut.</small>
          </div>
        </label>

        <label class="item">
          <input type="radio" name="vision" value="vision_3" />
          <div>
            <b>Vision 3 — Salarié + amélioration (voiture, etc.)</b>
            <small>Étudier la trajectoire avec hypothèses par défaut.</small>
          </div>
        </label>
      </div>

      <div class="actions">
        <a class="btn" href="/refinements">Aller à /refinements (sans préremplir)</a>
        <button id="go" disabled>Dérouler les raffinements</button>
      </div>

      <div class="note" id="note">Remarque : aucune vision n’est sélectionnée par défaut.</div>
    </div>

    <script>
      const goBtn = document.getElementById('go');
      const radios = Array.from(document.querySelectorAll('input[name="vision"]'));
      const note = document.getElementById('note');

      function getSelected() {
        const r = radios.find(x => x.checked);
        return r ? r.value : null;
      }

      function update() {
        const v = getSelected();
        goBtn.disabled = !v;
        note.textContent = v
          ? `Vision sélectionnée : ${v}. Le bouton va ouvrir /refinements?vision=${v}`
          : `Remarque : aucune vision n’est sélectionnée par défaut.`;
      }

      radios.forEach(r => r.addEventListener('change', update));
      update();

      goBtn.addEventListener('click', () => {
        const v = getSelected();
        if (!v) return;
        window.location.href = `/refinements?vision=${encodeURIComponent(v)}`;
      });
    </script>
  </body>
</html>
